webpackJsonp([15],{611:function(e,t,a){"use strict";e.exports=a(612)},612:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e){var t=e.user,a=e.type,n=e.className,l=e.hideNameOnMobile,r=(0,d.nodeUrl)()+"/@"+t.username;return u["default"].createElement("a",{href:r,className:(0,s["default"])(f["default"].userLink,n,o({},f["default"].alt,"alt"===a))},u["default"].createElement("img",{src:t.profile_image.small,className:f["default"].userAvatar}),u["default"].createElement("span",{className:(0,s["default"])(f["default"].userName,o({},f["default"].hideNameOnMobile,l))},t.name))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=l;var r=a(197),u=n(r),i=a(483),s=n(i),d=a(477),c=a(613),f=n(c),p={user:r.PropTypes.object.isRequired,type:r.PropTypes.oneOf(["default","alt"]),className:r.PropTypes.string,hideNameOnMobile:r.PropTypes.bool},m={type:"default",hideNameOnMobile:!1};l.propTypes=p,l.defaultProps=m},613:function(e,t){e.exports={userLink:"_2_2WJ _3myVE",userAvatar:"RIxWs",userName:"_2Co2-",alt:"_1_w0v _2tPAp",hideNameOnMobile:"_3e7wd _3ofrt"}},614:function(e,t,a){"use strict";e.exports=a(615)},615:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){return e?{pathname:t.pathname}:{pathname:t.pathname,query:{login_view:"is_visible",login_action:"like"}}}function r(e,t){return e?"pink":t}function u(e,t){return s({},t,e)}function i(e,t,a){var n=e.liked_by_user?a.photos.unlikePhoto:a.photos.likePhoto;return function(){return n(e.id).then(g.toJson).then(function(a){var n=u(a.photo,e);t.setSelectedPhoto(n),t.updatePhotoInPhotoFeed(n)})}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=a(197),c=n(d),f=a(483),p=n(f),m=a(514),h=n(m),y=a(517),b=n(y),v=a(518),_=n(v),w=a(522),P=n(w),g=a(462),E=a(484),N=n(E),k=a(523),T=n(k),C=a(616),O=n(C),I=(0,P["default"])((0,h["default"])("LikeLabel"),(0,b["default"])({likes:d.PropTypes.number}))(function(e){var t=e.likes;return t?c["default"].createElement("span",{className:O["default"].labelLike},t):c["default"].createElement("span",null)}),B=(0,P["default"])((0,h["default"])("LikeButton"),(0,b["default"])({type:d.PropTypes.oneOf(["default","alt"]),photo:d.PropTypes.object.isRequired,actions:d.PropTypes.object.isRequired,location:d.PropTypes.object.isRequired,className:d.PropTypes.string}),(0,_["default"])({type:"default"}));t["default"]=B(function(e){var t=e.location,a=e.photo,n=e.actions,u=e.type,s=e.className,d=e.api,f=e.authUser,m="default"===u?"outline":"outline-alt",h=a.liked_by_user,y=f?i(a,n,d):null;return c["default"].createElement(N["default"],{className:(0,p["default"])(O["default"].buttonLike,s),type:r(h,m),tag:"link",title:"Like photo",size:"small",to:l(f,t),onClick:y},c["default"].createElement("span",null,c["default"].createElement(T["default"],{type:"heart",className:(0,p["default"])(O["default"].likeIcon,o({},O["default"].likeIconLiked,a.liked_by_user))}),c["default"].createElement(I,{likes:a.likes})))})},616:function(e,t){e.exports={likeIcon:"BWSrD",likeIconLiked:"_1O_YD",labelLike:"_2ER2Y"}},617:function(e,t,a){"use strict";e.exports=a(618)},618:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var l=a(197),r=n(l),u=a(483),i=n(u),s=a(514),d=n(s),c=a(517),f=n(c),p=a(518),m=n(p),h=a(522),y=n(h),b=a(484),v=n(b),_=a(523),w=n(_),P=a(619),g=n(P),E=(0,y["default"])((0,d["default"])("DownloadLabel"),(0,f["default"])({isVisible:l.PropTypes.bool}))(function(e){var t=e.isVisible;return t?r["default"].createElement("span",{className:g["default"].label},"Download"):r["default"].createElement("span",null)}),N=(0,y["default"])((0,d["default"])("DownloadButton"),(0,f["default"])({photo:l.PropTypes.object.isRequired,type:l.PropTypes.oneOf(["default","alt"]),showLabel:l.PropTypes.bool,className:l.PropTypes.string}),(0,m["default"])({type:"default"}));t["default"]=N(function(e){var t=e.photo,a=e.type,n=e.showLabel,l=e.className;return r["default"].createElement(v["default"],{className:l,type:"default"===a?"outline":"outline-alt",size:"small",title:"Download photo",href:t.links.download,target:"_blank"},r["default"].createElement("span",null,r["default"].createElement(w["default"],{type:"download",className:(0,i["default"])(g["default"].downloadIcon,o({},g["default"].labelIcon,n))}),r["default"].createElement(E,{isVisible:n})))})},619:function(e,t){e.exports={icon:"_11dQc",downloadIcon:"Apljk _11dQc",labelIcon:"_1Jd5C",label:"_2Aga-"}},620:function(e,t,a){"use strict";e.exports=a(621)},621:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var a=e?{add_to_collection_view:"is_visible"}:{login_view:"is_visible",login_action:"add_to_collection"};return{pathname:t.pathname,query:a}}function l(e,t){return t.current_user_collections&&t.current_user_collections.length>0?"green":e}Object.defineProperty(t,"__esModule",{value:!0});var r=a(197),u=n(r),i=a(483),s=n(i),d=a(514),c=n(d),f=a(517),p=n(f),m=a(518),h=n(m),y=a(522),b=n(y),v=a(484),_=n(v),w=a(523),P=n(w),g=a(622),E=n(g),N=(0,b["default"])((0,c["default"])("AddToCollectionButton"),(0,p["default"])({type:r.PropTypes.oneOf(["default","alt"]),photo:r.PropTypes.object.isRequired,actions:r.PropTypes.object.isRequired,location:r.PropTypes.object.isRequired,className:r.PropTypes.string,authUser:r.PropTypes.object}),(0,h["default"])({type:"default"}));t["default"]=N(function(e){var t=e.photo,a=e.actions,n=e.location,r=e.type,i=e.className,d=e.authUser,c="default"===r?"outline":"outline-alt";return u["default"].createElement(_["default"],{className:(0,s["default"])(E["default"].buttonCollections,i),type:l(c,t),size:"small",tag:"link",title:"Add to collection",to:o(d,n),onClick:function(){return a.setSelectedPhoto(t)}},u["default"].createElement(P["default"],{type:"add",className:E["default"].addIcon}))})},622:function(e,t){e.exports={icon:"_1wfvP",addIcon:"_2rdbO _1wfvP"}},627:function(e,t,a){"use strict";e.exports=a(628)},628:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var a=e.params,n=e.loadContext;P["default"].photos.getPhoto(a.id).then(w.toJson).then(function(e){return/\/stats/.test(n.url)?void P["default"].photos.getPhotoStats(a.id).then(w.toJson).then(function(a){t(null,{asyncPropsSelectedPhoto:e,stats:{downloads:a.downloads,likes:a.likes,views:a.views}})}):void t(null,{asyncPropsSelectedPhoto:e})})["catch"](t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(197),c=n(d),f=a(428),p=n(f),m=a(483),h=n(m),y=a(481),b=n(y),v=a(629),_=a(630),w=a(462),P=n(w),g=a(604),E=a(477),N=a(611),k=n(N),T=a(614),C=n(T),O=a(617),I=n(O),B=a(620),j=n(B),M=a(567),V=n(M),L=a(631),x=n(L),R=a(634),S=n(R),q=a(523),U=n(q),A=a(637),W=n(A),D="Photos",G={selectedPhoto:d.PropTypes.object.isRequired,stats:d.PropTypes.object,location:d.PropTypes.object.isRequired,actions:d.PropTypes.object.isRequired,children:d.PropTypes.element,pixelRatio:d.PropTypes.number,windowWidth:d.PropTypes.number,auth:d.PropTypes.object},J=function(e){function t(e){l(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e)),n=e.actions,o=e.asyncPropsSelectedPhoto;return a.state={stats:e.stats,imgWidth:null},n.setSelectedPhoto(o),a}return u(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){!this.state.imgWidth&&e.windowWidth&&this.setState({imgWidth:e.windowWidth})}},{key:"isInfoView",value:function(){return this.isMetaView()||this.isStatsView()}},{key:"isMetaView",value:function(){var e=this.props.location;return/\/info/.test(e.pathname)}},{key:"isStatsView",value:function(){var e=this.props.location;return/\/stats/.test(e.pathname)}},{key:"fetchStats",value:function(){var e=this,t=this.props.selectedPhoto;this.state.stats||P["default"].photos.getPhotoStats(t.id).then(w.toJson).then(function(t){e.setState({stats:{downloads:t.downloads,likes:t.likes,views:t.views}})})}},{key:"handleLoadedImage",value:function(){this.setState({imageLoaded:!0})}},{key:"renderUser",value:function(){var e=this.props.selectedPhoto,t=e.user;return c["default"].createElement("div",{className:(0,h["default"])(W["default"].user,o({},W["default"].hideTopControls,this.isInfoView()))},c["default"].createElement(k["default"],{user:t,type:"alt",hideNameOnMobile:!0}))}},{key:"renderLogo",value:function(){return c["default"].createElement("div",{className:W["default"].logoContainer},c["default"].createElement("a",{href:"/",className:W["default"].logo,title:"Back to Unsplash"},c["default"].createElement(U["default"],{type:"logo",color:"#fff"})))}},{key:"renderActionButtons",value:function(){var e=this.props,t=e.selectedPhoto,a=e.actions,n=e.location,l=e.auth;return c["default"].createElement("div",{className:(0,h["default"])(W["default"].actionButtons,o({},W["default"].hideTopControls,this.isInfoView()))},c["default"].createElement(C["default"],{className:W["default"].actionButton,type:"alt",photo:t,actions:a,location:n,authUser:l.user,api:P["default"]}),c["default"].createElement(j["default"],{className:W["default"].actionButton,type:"alt",photo:t,actions:a,location:n,authUser:l.user}),c["default"].createElement(I["default"],{className:W["default"].actionButton,type:"alt",photo:t,showLabel:!0}))}},{key:"renderHeader",value:function(){return c["default"].createElement("div",{className:W["default"].headerContainer},c["default"].createElement("div",{className:W["default"].header},this.renderUser(),this.renderLogo(),this.renderActionButtons()))}},{key:"renderLocation",value:function(){var e=this.props.selectedPhoto,t=(0,E.formatLocation)(e.location||{});return t?c["default"].createElement("div",{className:(0,h["default"])(W["default"].location,o({},W["default"].hideBottomControls,this.isInfoView()))},c["default"].createElement(U["default"],{className:W["default"].locationIcon,type:"marker"}),t):null}},{key:"renderInfoButtons",value:function(){var e=this.props.selectedPhoto;return c["default"].createElement("div",{className:(0,h["default"])(W["default"].infoButtons,o({},W["default"].hideBottomControls,this.isInfoView()))},c["default"].createElement("div",{className:W["default"].infoContainer},c["default"].createElement(V["default"],{className:W["default"].infoButtonContainer,label:"Info",width:50,bottom:60},c["default"].createElement(b["default"],{className:W["default"].infoButton,to:{pathname:"/photos/"+e.id+"/info"}},c["default"].createElement(U["default"],{className:W["default"].infoIcon,type:"info",color:"#fff"})))),c["default"].createElement(V["default"],{className:W["default"].infoButtonContainer,label:"Stats",width:50,bottom:60},c["default"].createElement(b["default"],{className:W["default"].infoButton,to:{pathname:"/photos/"+e.id+"/stats"},onMouseEnter:this.fetchStats.bind(this)},c["default"].createElement(U["default"],{className:W["default"].infoIcon,type:"stats",color:"#fff"}))))}},{key:"renderFooter",value:function(){return c["default"].createElement("div",{className:W["default"].footerContainer},c["default"].createElement("div",{className:W["default"].footer},this.renderLocation(),this.renderInfoButtons()))}},{key:"renderMetaView",value:function(){var e=this.state.stats,t=this.props.selectedPhoto;return c["default"].createElement("div",{className:(0,h["default"])(W["default"].infoOverlay,o({},W["default"].isVisible,this.isInfoView()))},c["default"].createElement("div",{className:(0,h["default"])(W["default"].overlayContentContainer,o({},W["default"].contentContainerIsVisible,this.isInfoView()))},c["default"].createElement("div",{className:(0,h["default"])(W["default"].overlayContent,o({},W["default"].showContent,this.isMetaView()))},c["default"].createElement(x["default"],{photo:t})),c["default"].createElement("div",{className:(0,h["default"])(W["default"].overlayContent,o({},W["default"].showContent,this.isStatsView()))},c["default"].createElement(S["default"],{stats:e}))),c["default"].createElement("div",{className:W["default"].closeContainer},c["default"].createElement(b["default"],{className:(0,h["default"])(W["default"].close,o({},W["default"].showBottomControls,this.isInfoView())),to:{pathname:"/photos/"+t.id}},c["default"].createElement(U["default"],{className:W["default"].closeIcon,type:"cross"}),c["default"].createElement("span",{className:W["default"].closeLabel},"Close"))))}},{key:"render",value:function(){var e=this.props,t=e.selectedPhoto,a=e.windowWidth,n=e.pixelRatio,o=this.state,l=o.imgWidth,r=o.imageLoaded,u=t.user,i=t.width,s=t.height,d=(0,_.buildTitle)(u.name),f=(0,_.buildDescription)(u.name),m=(0,E.nodeUrl)()+"/photos/"+t.id,h=l,y=(0,g.getImageHeightFromWidth)(h,i,s),b=(0,E.buildImgixUrl)(t.urls.raw,h,y,n),w=(0,E.buildImgixUrl)(t.urls.raw,1080,(0,g.getImageHeightFromWidth)(1080,i,s),n),P=r&&a>1080?b:w;return c["default"].createElement("div",{className:W["default"].container,style:{zIndex:1e4,backgroundColor:t.color,backgroundImage:'url("'+P+'")'}},c["default"].createElement(p["default"],{title:d,meta:(0,v.buildPhotoMeta)(u,t,d,f,m)}),c["default"].createElement("img",{src:l?b:null,onLoad:this.handleLoadedImage.bind(this),style:{width:0,height:0,position:"absolute"}}),c["default"].createElement("div",{className:W["default"].overlay},this.renderHeader(),this.renderFooter(),this.renderMetaView()))}}]),t}(d.Component);t["default"]=J,J.displayName=D,J.propTypes=G,J.loadProps=i},629:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function l(e,t,a,n,o){var l=t?[{name:"twitter:image",content:t.urls.regular}]:[],r=e?{name:"twitter:creator",content:"@"+e.username}:{};return[{name:"twitter:site",content:"@unsplash"},{name:"twitter:title",content:a},{name:"twitter:description",content:n},{name:"twitter:url",content:o},r,{name:"twitter:card",content:"photo"}].concat(l)}function r(e,t,a,n){var o=e?[{name:"og:image",content:e.urls.regular.replace("https","http")},{name:"og:image:secure_url",content:e.urls.regular}]:[];return[{name:"og:title",content:t},{name:"og:description",content:a},{name:"og:url",content:n},{name:"og:type",content:"website"}].concat(o)}function u(e,t,a,n,u){return[{name:"description",content:n},{name:"canonical",content:u}].concat(o(l(e,t,a,n,u)),o(r(t,a,n,u)))}function i(e,t,a,n,o){return u(e,t,a,n,o)}function s(e,t,a,n,o){return u(e,t,a,n,o)}function d(e,t,a,n){return u(null,e,t,a,n)}function c(e,t){var a=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return a?(0,m.nodeUrl)()+"/collections/curated/"+e:(0,m.nodeUrl)()+"/collections/"+e+"/"+(0,p["default"])(t,{lower:!0})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=l,t["default"]=r,t.buildMetas=u,t.buildUserMetas=i,t.buildPhotoMeta=s,t.buildCollectionMetas=d,t.buildCollectionUrl=c;var f=a(563),p=n(f),m=a(477)},630:function(e,t){"use strict";function a(e){return"Photo by "+e+" | Unsplash"}function n(e){return"Do-whatever-you-want high-resolution photo from "+e+" on Unsplash."}Object.defineProperty(t,"__esModule",{value:!0}),t.buildTitle=a,t.buildDescription=n},631:function(e,t,a){"use strict";e.exports=a(632)},632:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.photo,a=t.width,n=t.height,o=t.exif,r=void 0===o?{}:o;return u["default"].createElement("div",{className:d["default"].container},u["default"].createElement("div",{className:d["default"].mainInfo},u["default"].createElement(l,{label:"Published",value:(0,i.formatDate)(new Date(t.created_at))}),u["default"].createElement(l,{label:"Dimensions",value:a+" x "+n})),u["default"].createElement("div",null,Object.keys(r).map(function(e){return u["default"].createElement(l,{key:e,label:e.replace("_"," "),value:r[e]})})))}function l(e){var t=e.label,a=e.value;return u["default"].createElement("div",{className:d["default"].stat},u["default"].createElement("label",{className:d["default"].label},t),u["default"].createElement("span",{className:d["default"].value},a||"---"))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var r=a(197),u=n(r),i=a(477),s=a(633),d=n(s),c={photo:r.PropTypes.object.isRequired};o.propTypes=c,l.propTypes={label:r.PropTypes.string.isRequired,value:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number]).isRequired}},633:function(e,t){e.exports={container:"_1MunQ",mainInfo:"_3kD75",stat:"_1rn2C",MaisVisible:"_24fNa",label:"lyiyI _22Som",value:"_3bbq7 _3myVE"}},634:function(e,t,a){"use strict";e.exports=a(635)},635:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.stats;return u["default"].createElement("div",{className:d["default"].stats},t?Object.keys(t).map(function(e){return u["default"].createElement(l,{key:e,label:e,value:t[e]})}):null)}function l(e){var t=e.label,a=e.value;return u["default"].createElement("div",{className:d["default"].stat},u["default"].createElement("label",{className:d["default"].label},t),u["default"].createElement("span",{className:d["default"].value},(0,i.formatNumber)(a)))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var r=a(197),u=n(r),i=a(477),s=a(636),d=n(s);o.propTypes={stats:r.PropTypes.object},l.propTypes={label:r.PropTypes.string.isRequired,value:r.PropTypes.number.isRequired}},636:function(e,t){e.exports={stats:"_2Tg9H",stat:"_3TNUW",label:"_2eKkf _22Som",value:"lhhRo _3myVE"}},637:function(e,t){e.exports={container:"_1Mt4k",overlay:"_1DgUN",headerContainer:"_3JfBw",header:"_3KncD _1VOuf",user:"_23nes _2B-vG",logoContainer:"xLYBX",logo:"_2Y5FL _2tPAp",actionButtons:"_3nZCU _2B-vG",actionButton:"_1dwyh",footerContainer:"_3hRrb",footer:"_1ihmd _1VOuf",location:"_3dElQ _2B-vG _3myVE",locationIcon:"_31fav",infoButtons:"Vqu5S _2B-vG",infoContainer:"_3cMvr",infoButtonContainer:"_3YoZB",infoButton:"Zim07 _2tPAp",infoIcon:"_2-4nu",infoOverlay:"E-tSg _2B-vG",overlayContentContainer:"_31yNB _2B-vG",contentContainerIsVisible:"_3-VqZ",overlayContent:"_3fqOJ _2B-vG",showContent:"_3iqZB",isVisible:"_2FktR",closeContainer:"_2_u20",close:"_2A0gA _1VOuf _2tPAp _2B-vG",closeIcon:"wlTke",closeLabel:"XymzI _22Som",hideTopControls:"_2w96w",hideBottomControls:"_3ZiGW",showBottomControls:"rEBvH"}}});
//# sourceMappingURL=15.631ef.main.js.map